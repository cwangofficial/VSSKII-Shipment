<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSSKII Á≥ªÁµ±ÁôªÂÖ•</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --border-color: #000;
            --font-family: "Microsoft JhengHei", "ÂæÆËªüÊ≠£ÈªëÈ´î", sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .login-container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            overflow: hidden;
            margin: 20px;
        }

        .login-header {
            background: #000;
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .logo-container {
            margin: 0;
        }

        .logo-container img {
            width: 200px;
            height: auto;
            display: inline-block;
        }

        .login-body {
            padding: 40px 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-family: var(--font-family);
            font-size: 15px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #000;
            background: #f9f9f9;
        }

        .form-input:hover {
            border-color: #999;
        }

        .login-btn {
            width: 100%;
            padding: 14px;
            background: #000;
            color: white;
            border: none;
            border-radius: 6px;
            font-family: var(--font-family);
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .login-btn:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .login-btn:active {
            transform: translateY(0);
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 13px;
            text-align: center;
        }

        .system-selection {
            padding: 40px 30px;
            background: #f9f9f9;
        }

        .system-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .system-btn {
            padding: 25px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .system-btn:hover {
            border-color: #000;
            background: #f5f5f5;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .system-btn-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        .system-btn-title {
            font-size: 20px;
            font-weight: 700;
            color: #000;
            margin: 0;
        }

        .logout-btn {
            width: 100%;
            padding: 10px;
            background: #666;
            color: white;
            border: none;
            border-radius: 6px;
            font-family: var(--font-family);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }

        .logout-btn:hover {
            background: #555;
        }

        .password-toggle {
            position: relative;
        }

        .toggle-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 18px;
            color: #666;
            user-select: none;
        }

        .toggle-icon:hover {
            color: #000;
        }

        /* Âπ≥ÊùøË£ùÁΩÆ */
        @media (max-width: 768px) {
            .login-container {
                margin: 15px;
            }
            
            .system-selection {
                padding: 30px 20px;
            }
            
            .system-btn {
                padding: 22px 18px;
            }

            .system-btn-icon {
                font-size: 44px;
            }
            
            .system-btn-title {
                font-size: 18px;
            }
        }

        /* ÊâãÊ©üË£ùÁΩÆ */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .login-container {
                margin: 0;
                border-radius: 0;
            }
            
            .login-header {
                padding: 25px 15px;
            }
            
            .logo-container img {
                width: 160px;
            }
            
            .login-body {
                padding: 25px 20px;
            }
            
            .system-selection {
                padding: 25px 15px;
            }
            
            .selection-title {
                font-size: 16px;
            }
            
            .system-btn {
                padding: 20px 15px;
            }
            
            .system-btn-icon {
                font-size: 40px;
            }
            
            .system-btn-title {
                font-size: 17px;
            }
        }

        /* Â∞èÂûãÊâãÊ©ü */
        @media (max-width: 360px) {
            .login-header {
                padding: 25px 10px;
            }
            
            .logo-container img {
                width: 140px;
            }
            
            .login-body {
                padding: 20px 15px;
            }
            
            .form-input {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .login-btn {
                padding: 12px;
                font-size: 15px;
            }
        }

        /* Ëß∏ÊéßË£ùÁΩÆÂÑ™Âåñ */
        @media (hover: none) and (pointer: coarse) {
            .form-input {
                min-height: 48px;
                font-size: 16px;
                padding: 14px 15px;
            }
            
            .login-btn,
            .system-btn,
            .logout-btn {
                min-height: 48px;
            }
            
            .toggle-icon {
                font-size: 22px;
                padding: 10px;
            }
        }

        /* Ê©´ÂêëÊ®°ÂºèÔºàÊâãÊ©üÊ©´ÊîæÔºâ */
        @media (max-height: 500px) and (orientation: landscape) {
            .login-header {
                padding: 20px 30px;
            }
            
            .logo-container {
                margin-bottom: 10px;
            }
            
            .logo-container img {
                width: 120px;
            }
            
            .login-body,
            .system-selection {
                padding: 25px 30px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
        }

        /* Ë∂ÖÂØ¨Ëû¢Âπï */
        @media (min-width: 1200px) {
            .login-container {
                max-width: 550px;
            }
        }
    </style>
</head>
<body>

<div id="app">
    <div class="login-container">
        <!-- ÁôªÂÖ•Áï´Èù¢ -->
        <div v-if="!isLoggedIn">
            <div class="login-header">
                <div class="logo-container">
                    <img src="logo.png" alt="VSSKII LOGO">
                </div>
            </div>

            <div class="login-body">
                <div class="error-message" v-if="errorMessage">
                    {{ errorMessage }}
                </div>

                <form @submit.prevent="handleLogin">
                    <div class="form-group">
                        <label class="form-label">Â∏≥Ëôü</label>
                        <input type="text" 
                               class="form-input" 
                               v-model="username"
                               placeholder="Ë´ãËº∏ÂÖ•Â∏≥Ëôü"
                               autocomplete="username"
                               ref="usernameInput"
                               required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ÂØÜÁ¢º</label>
                        <div class="password-toggle">
                            <input :type="showPassword ? 'text' : 'password'" 
                                   class="form-input" 
                                   v-model="password"
                                   placeholder="Ë´ãËº∏ÂÖ•ÂØÜÁ¢º"
                                   autocomplete="current-password"
                                   inputmode="numeric"
                                   pattern="[0-9]*"
                                   required>
                            <span class="toggle-icon" @click="showPassword = !showPassword">
                                {{ showPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è' }}
                            </span>
                        </div>
                    </div>

                    <button type="submit" class="login-btn">ÁôªÂÖ•Á≥ªÁµ±</button>
                </form>
            </div>
        </div>

        <!-- Á≥ªÁµ±ÈÅ∏ÊìáÁï´Èù¢ -->
        <div v-if="isLoggedIn">
            <div class="login-header">
                <div class="logo-container">
                    <img src="logo.png" alt="VSSKII LOGO">
                </div>
            </div>

            <div class="system-selection">
                <div class="system-buttons">
                    <div class="system-btn" @click="goToMain">
                        <div class="system-btn-icon">üì¶</div>
                        <div class="system-btn-title">Âá∫Ë≤®ÂñÆÁ≥ªÁµ±</div>
                    </div>

                    <div class="system-btn" @click="goToStock">
                        <div class="system-btn-icon">üìä</div>
                        <div class="system-btn-title">Â∫´Â≠òÊ∏ÖÈªûÁ≥ªÁµ±</div>
                    </div>
                </div>

                <button class="logout-btn" @click="handleLogout">ÁôªÂá∫</button>
            </div>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, onMounted } = Vue;

    createApp({
        setup() {
            const username = ref('');
            const password = ref('');
            const showPassword = ref(false);
            const isLoggedIn = ref(false);
            const currentUser = ref('');
            const errorMessage = ref('');
            const usernameInput = ref(null);

            const VALID_USERNAME = 'admin';
            const VALID_PASSWORD = '0000';
            const SESSION_KEY = 'vsskii_session';

            const checkSession = () => {
                const session = sessionStorage.getItem(SESSION_KEY);
                if (session) {
                    try {
                        const data = JSON.parse(session);
                        if (data.isLoggedIn && data.username) {
                            isLoggedIn.value = true;
                            currentUser.value = data.username;
                        }
                    } catch (e) {
                        console.error('Session Ëß£ÊûêÈåØË™§', e);
                    }
                }
            };

            const handleLogin = () => {
                errorMessage.value = '';

                if (username.value === VALID_USERNAME && password.value === VALID_PASSWORD) {
                    isLoggedIn.value = true;
                    currentUser.value = username.value;
                    
                    sessionStorage.setItem(SESSION_KEY, JSON.stringify({
                        isLoggedIn: true,
                        username: username.value,
                        loginTime: new Date().toISOString()
                    }));

                    password.value = '';
                } else {
                    errorMessage.value = 'Â∏≥ËôüÊàñÂØÜÁ¢ºÈåØË™§ÔºåË´ãÈáçÊñ∞Ëº∏ÂÖ•';
                    password.value = '';
                }
            };

            const handleLogout = () => {
                if (confirm('Á¢∫ÂÆöË¶ÅÁôªÂá∫ÂóéÔºü')) {
                    sessionStorage.removeItem(SESSION_KEY);
                    isLoggedIn.value = false;
                    currentUser.value = '';
                    username.value = '';
                    password.value = '';
                    errorMessage.value = '';
                }
            };

            const goToMain = () => {
                window.location.href = 'main.html';
            };

            const goToStock = () => {
                window.location.href = 'stock.html';
            };

            onMounted(() => {
                checkSession();
                if (!isLoggedIn.value && usernameInput.value) {
                    setTimeout(() => {
                        usernameInput.value?.focus();
                    }, 100);
                }
            });

            return {
                username,
                password,
                showPassword,
                isLoggedIn,
                currentUser,
                errorMessage,
                usernameInput,
                handleLogin,
                handleLogout,
                goToMain,
                goToStock
            };
        }
    }).mount('#app');
</script>

</body>
</html>
